<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Loan Application Form</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* General Reset */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Body */
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      color: #333;
      line-height: 1.6;
      padding-top: 80px; /* Allow for fixed header space */
    }

    .form-container #top-title {
      font-size: 1.8rem;
      background: linear-gradient(to right, red, orange);
      background-clip: text;
      -webkit-background-clip: text;
      color: transparent;
    }

    /* Navbar Styles */
    header {
      background: #1a202c;
      padding: 20px 40px;
      position: fixed;
      width: 100%;
      top: 0;
      left: 0;
      z-index: 1000;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: all 0.3s ease;
    }

    .logo img {
      height: 70px;
      object-fit: contain;
      font-size: larger;
      width: auto;
    }

    /* Navigation Links */
    .nav-links {
      list-style: none;
      display: flex;
      gap: 30px;
    }

    .nav-links li {
      position: relative;
    }

    .nav-links a {
      color: white;
      text-decoration: none;
      font-size: 18px;
      text-transform: uppercase;
      letter-spacing: 1px;
      transition: color 0.3s ease;
    }

    .nav-links a:hover {
      color: #fbbf24;
    }

    /* Mobile Navbar */
    .menu-bar {
      display: none;
      font-size: 30px;
      color: white;
      cursor: pointer;
    }

    /* For Mobile View */
    @media (max-width: 768px) {
      .nav-links {
        display: none;
        width: 100%;
        position: absolute;
        top: 80px;
        left: 0;
        background-color: #1a202c;
        flex-direction: column;
        padding: 20px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
      }

      .nav-links.active {
        display: flex;
      }

      .nav-links li {
        margin: 15px 0;
      }

      .nav-links a {
        font-size: 20px;
      }

      .menu-bar {
        display: block;
      }
    }

    /* Navbar Hover Effect */
    .nav-links li:hover {
      border-bottom: 2px solid #fbbf24;
    }


    /* Loan Application Section */
    .loan-application {
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: calc(100vh - 80px);
      background-color: #f4f4f4;
    }

    /* Form Container */
    .form-container {
      position: relative;
      background-color: #fff;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 100%;
      max-width: 800px;
      margin: 20px auto;
      z-index: 1; 
    }

    /* Add Background Image */
    .form-container::after {
      content: "";
      position: absolute;
      top: 100px;
      left: 0;
      width: 100%;
      height: 90%;
      background: url('Images/Logo.png'), url('Images/Logo.png'), url('Images/Logo.png');
      background-repeat: no-repeat;
      background-position: center top, center center, center bottom;
      background-size: contain;
      opacity: 0.4;
      z-index: -1; 
      pointer-events: none; 
    }

    /* Form Elements */
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #004D40;
      font-size: 32px;
    }

    h2 {
      text-align: center;
      text-decoration: underline;
    }

    .required-symbol {
      color: red;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .declare {
      text-align: center;
    }

    .form-group label {
      display: block;
      margin-bottom: 5px;
      color: #333;
      font-weight: bold;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc; 
      background: transparent;
      border-radius: 5px;
      font-size: 16px;
    }

    /* Submit Button */
    .submit-btn,
    .print-btn {
      background-color: #004D40;
      color: #fff;
      padding: 12px 20px;
      font-size: 18px;
      border: none;
      border-radius: 5px;
      width: 100%;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .checkbox-group {
      display: inline-block;
    }

    .submit-btn:hover {
      background-color: #00796B;
    }

    /* Signature */
    .dropdown {
      width: 300px;
      padding: 10px;
      cursor: pointer;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }

    .modal-content {
      background: #fff;
      padding: 20px;
      text-align: center;
      width: 90%;
      max-width: 450px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }

    .modal-actions {
      display: flex;
      justify-content: space-between;
      margin-top: 10px;
    }

    .modal-actions button {
      padding: 10px 20px;
      cursor: pointer;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
    }

    .modal-actions button:hover {
      background-color: #0056b3;
    }

    canvas {
      border: 2px solid #ccc;
      background-color: #f1f1f1;
      margin-bottom: 20px;
      cursor: crosshair;
      width: 400px;
    }

    .color-options {
      display: flex;
      justify-content: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .color-options button {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    .color-options button:hover {
      opacity: 0.7;
    }

    /* Color buttons */
    .color-options button[data-color="black"] { background-color: black; }
    .color-options button[data-color="red"] { background-color: red; }
    .color-options button[data-color="green"] { background-color: green; }
    .color-options button[data-color="blue"] { background-color: blue; }

    /* File Input Styles */
    .file-input-container {
      margin-top: 15px;
    }
    .file-input-container input[type="file"] {
      display: none;
    }
    .file-input-container label {
      cursor: pointer;
      background-color: #28a745;
      padding: 10px 20px;
      border-radius: 5px;
      color: white;
      font-size: 14px;
      display: inline-block;
    }
    .file-input-container label:hover {
      background-color: #218838;
    }

    @media (max-width: 600px) {
      canvas {
        width: 100%;
        height: 200px;
      }

      .modal-content {
        padding: 15px;
      }
    }

    /* Responsive Media Queries */
    @media (max-width: 768px) {
      header .nav-links {
        flex-direction: column;
        align-items: flex-start;
      }

      header .nav-links li {
        margin: 10px 0;
      }

      .form-container {
        padding: 20px;
      }

      h1 {
        font-size: 24px;
      }

      .submit-btn,
      .print-btn {
        font-size: 16px;
      }
    }

    @media (max-width: 480px) {
      * {
        overflow-x: hidden;
      }
      .form-container {
        padding: 15px;
        margin-top: 80px;
      }

      h1 {
        font-size: 20px;
      }

      .form-group input,
      .form-group select,
      .form-group textarea {
        font-size: 14px;
      }

      .submit-btn {
        font-size: 14px;
      }
    }

    footer {
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: #f3f4f6;
      padding: 40px 20px;
      text-align: center;
      font-size: 14px;
    }

    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      align-items: flex-start;
      gap: 20px;
      margin-bottom: 20px;
    }

    .footer-container div {
      flex: 1;
      min-width: 280px;
    }

    .company-details h3 {
      font-size: 1.8rem;
      color: #fbbf24;
      margin-bottom: 10px;
    }

    .company-details p {
      font-size: 1rem;
      line-height: 1.6;
      color: #e5e7eb;
    }

    .contact-info h4,
    .social-icons h4 {
      font-size: 1.5rem;
      color: #fbbf24;
      margin-bottom: 10px;
    }

    .contact-info p,
    .contact-info a {
      font-size: 1rem;
      color: #e5e7eb;
      text-decoration: none;
      margin: 5px 0;
    }

    .contact-info a:hover {
      color: #fbbf24;
    }

    .social-icons a {
      font-size: 1.5rem;
      color: #e5e7eb;
      margin-right: 15px;
      transition: color 0.3s ease;
    }

    .social-icons a:hover {
      color: #fbbf24;
    }

    .footer-bottom {
      border-top: 1px solid rgba(255, 255, 255, 0.2);
      padding-top: 10px;
      font-size: 0.9rem;
      color: #e5e7eb;
    }

    /* validation message */
    .validation-message {
      font-size: 0.9em;
      margin-top: 5px;
    }

    @media (max-width: 768px) {
      .footer-container {
        flex-direction: column;
        text-align: center;
      }
    }

    /* date of birth */
    .form-group-dob label {
      font-size: 1.1rem;
    }

    .form-group-dob input[type="date"] {
      border: 1px solid #ccc;
      padding: 0.6rem;
      font-size: 1rem;
    }

    .error-message {
      color: red;
      font-style: italic;
      font-size: 0.85rem;
      margin-top: 0.5rem;
      display: none; /* Initially hidden */
    }

    @media print {
      /* Hide header and footer */
      header, footer {
        display: none;
      }

      /* Ensure the form content is visible */
      .form-container {
        display: block;
      }

      /* Retain background logo */
      body {
        -webkit-print-color-adjust: exact; /* For Safari */
        print-color-adjust: exact; /* For modern browsers */
      }

      /* Optionally, adjust margins for the printout */
      body {
        margin: 0;
      }

      .print-btn,
      .submit-btn {
        display: none; 
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">
      <a href="index.html">
        <img src="Images/Logo.png" alt="Logo"></a>
    </div>
  
    <!-- Navbar Links -->
    <ul class="nav-links">
      <li><a href="LoanForm.html">Apply for Loan</a></li>
      <li><a href="#services">Services</a></li>
      <li><a href="AdminLogin.html">Admin Login</a></li>
    </ul>
  
    <!-- Mobile Menu Button -->
    <div class="menu-bar" id="menu-bar">
      <i class="fas fa-bars"></i>
    </div>
  </header>

  <section class="loan-application">
    <div class="form-container">
      <h2 id="top-title">INSTA FINANCE</h2>
      <h1>Loan Application Form</h1>
      <form id="loanForm" onsubmit="return submitLoanApplication(event)">
        <h2>Personal Details</h2>
        <div class="form-group">
          <label for="name">Full Name <span class="required-symbol"> *</span></label>
          <input type="text" id="name" name="name" placeholder="Enter your full name" required>
        </div>
        <div class="form-group form-group-dob">
          <label for="dob">Date of Birth <span class="required-symbol"> *</span></label>
          <input type="date" id="dob" name="dob">
          <small id="dob-error" class="error-message">You must be at least 18 years old.</small>
        </div>
        <div class="form-group">
          <label for="gender">Gender <span class="required-symbol"> *</span></label>
          <select id="gender" name="gender"  required>
            <option value="select gender">Select Gender</option>
            <option value="male">Male</option>
            <option value="female">Female</option>
            <option value="other">Other</option>
          </select>
        </div>
        <div class="form-group">
          <label for="phone">Contact Number <span class="required-symbol">*</span></label>
          <input type="tel" id="phone" name="phone" placeholder="Enter your contact number" required maxlength="10">
        </div>
        <div class="form-group">
          <label for="email">Email Address <span class="required-symbol">*</span></label>
          <input type="email" id="email" name="email" placeholder="Enter your email address" required>
        </div>
        <div class="form-group">
          <label for="ownership">Address Ownership <span class="required-symbol">*</span></label>
          <select id="ownership" name="ownership" required>
            <option value="" disabled selected>Select ownership</option>
            <option value="owned">Owned</option>
            <option value="rented">Rented</option>
          </select>
        </div>
        <div class="form-group">
          <label for="address">Address <span class="required-symbol">*</span></label>
          <textarea id="address" name="address" rows="4" placeholder="Enter your address" required></textarea>
        </div>
        <div class="form-group">
          <label for="pan">Pan Number <span class="required-symbol">*</span></label>
          <input type="text" id="pan" name="pan" placeholder="Enter your Pan number" maxlength="10" required>
        </div>
        <div class="form-group">
          <label for="aadhar">Aadhar Number <span class="required-symbol">*</span></label>
          <input type="text" id="aadhar" name="aadhar" placeholder="Enter your Aadhar number" maxlength="12" required>
        </div>
        <div class="form-group">
          <label for="state">State <span class="required-symbol">*</span></label>
          <select id="state" name="state" class="dropdown" required>
            <option value="" disabled selected>Select State</option>
            <option value="maharashtra">Maharashtra</option>
          </select>
        </div>
        <!-- District Dropdown -->
        <div class="form-group">
          <label for="district">Select District<span class="required-symbol"> *</span></label>
          <select id="district" onchange="populateTowns()">
              <option value="" disabled selected>--Select District--</option>
              <option value="Ahmednagar">Ahmednagar</option>
              <option value="Akola">Akola</option>
              <option value="Amravati">Amravati</option>
              <option value="Aurangabad">Aurangabad</option>
              <option value="Beed">Beed</option>
              <option value="Bhandara">Bhandara</option>
              <option value="Buldhana">Buldhana</option>
              <option value="Chandrapur">Chandrapur</option>
              <option value="Dhule">Dhule</option>
              <option value="Gadchiroli">Gadchiroli</option>
              <option value="Gondia">Gondia</option>
              <option value="Hingoli">Hingoli</option>
              <option value="Jalgaon">Jalgaon</option>
              <option value="Jalna">Jalna</option>
              <option value="Kolhapur">Kolhapur</option>
              <option value="Latur">Latur</option>
              <option value="Mumbai City">Mumbai City</option>
              <option value="Mumbai Suburban">Mumbai Suburban</option>
              <option value="Nagpur">Nagpur</option>
              <option value="Nanded">Nanded</option>
              <option value="Nandurbar">Nandurbar</option>
              <option value="Nashik">Nashik</option>
              <option value="Osmanabad">Osmanabad</option>
              <option value="Palghar">Palghar</option>
              <option value="Parbhani">Parbhani</option>
              <option value="Pune">Pune</option>
              <option value="Raigad">Raigad</option>
              <option value="Ratnagiri">Ratnagiri</option>
              <option value="Sangli">Sangli</option>
              <option value="Satara">Satara</option>
              <option value="Sindhudurg">Sindhudurg</option>
              <option value="Solapur">Solapur</option>
              <option value="Thane">Thane</option>
              <option value="Wardha">Wardha</option>
              <option value="Washim">Washim</option>
              <option value="Yavatmal">Yavatmal</option>
          </select>
        </div>

        <!-- Town Dropdown -->
        <div class="form-group">
          <label for="town">Select Taluka<span class="required-symbol"> *</span></label>
          <select id="town">
              <option value="" disabled selected>--Select Taluka--</option>
          </select>
        </div>

        <h2>Loan Details</h2>
        <div class="form-group">
          <label for="loanAmount">Loan Amount (₹)<span class="required-symbol"> *</span></label>
          <input type="number" id="loanAmount" name="loanAmount" placeholder="Enter loan amount" required>
          <span id="loanAmountError" class="error"></span>
        </div>
        <div class="form-group">
          <label for="tenure">Loan Tenure (in months)<span class="required-symbol"> *</span></label>
          <input type="number" id="tenure" name="tenure" placeholder="Enter loan tenure" required>
          <span id="tenureError" class="error"></span>
        </div>
        <div class="form-group">
          <label for="emiSchedule">Preferred EMI Schedule<span class="required-symbol"> *</span></label>
          <select id="emiSchedule" name="emiSchedule" required>
            <option value="" disabled selected>Select EMI Schedule</option>
            <option value="daily">Daily</option>
            <option value="weekly">Weekly</option>
            <option value="monthly">Monthly</option>
          </select>
          <span id="emiScheduleError" class="error"></span>
        </div>

        <h2>Guarantor</h2>
        <div class="form-group">
          <label for="refName1">Guarantor Name<span class="required-symbol"> *</span></label>
          <input type="text" id="refName1" name="refName1" placeholder="Enter name">
        </div>
        <div class="form-group">
          <label for="refRelationship1">Relationship<span class="required-symbol"> *</span></label>
          <input type="text" id="refRelationship1" name="refRelationship1" placeholder="Enter relationship">
        </div>
        <div class="form-group">
          <label for="refContact1">Contact Number<span class="required-symbol"> *</span></label>
          <input type="tel" id="refContact1" name="refContact1" placeholder="Enter contact number" maxlength="10">
        </div>
        <div class="form-group">
          <label for="ownership">Address Ownership <span class="required-symbol"> *</span></label>
          <select id="gownership" name="gownership" required>
            <option value="" disabled selected>Select ownership</option>
            <option value="owned">Owned</option>
            <option value="rented">Rented</option>
          </select>
        </div>
        <div class="form-group">
          <label for="guarantorAddress">Address <span class="required-symbol"> *</span></label>
          <textarea id="guarantorAddress" name="guarantorAddress" rows="4" placeholder="Enter guarantor address" required></textarea>
        </div>
        <div class="form-group">
          <label for="guarantorPan">Pan Number <span class="required-symbol"> *</span></label>
          <input type="text" id="guarantorPan" name="guarantorPan" placeholder="Enter guarantor Pan number" maxlength="10" required>
        </div>
        <div class="form-group">
          <label for="guarantorAadhar">Aadhar Number <span class="required-symbol"> *</span></label>
          <input type="text" id="guarantorAadhar" name="guarantorAadhar" placeholder="Enter guarantor Aadhar number" maxlength="12" required>
        </div>
    
        <div class="form-group">
          <label for="photoUpload">Upload Photo <span class="required-symbol"> *</span></label>
          <input type="file" id="photoUpload" name="photoUpload" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="aadharUpload">Upload Aadhar <span class="required-symbol"> *</span></label>
          <input type="file" id="aadharUpload" name="aadharUpload" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="panUpload">Upload Pan <span class="required-symbol"> *</span></label>
          <input type="file" id="panUpload" name="panUpload" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="incomeProof">Upload Income Proof <span class="required-symbol"> *</span></label>
          <input type="file" id="gincomeProof" name="gincomeProof" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="residentialProof">Upload Residential Proof <span class="required-symbol"> *</span></label>
          <input type="file" id="gresidentialProof" name="gresidentialProof" accept=".png, .jpg, .jpeg" required>
        </div>
        
        <h2>Documents Upload</h2>
        <div class="form-group">
          <label for="photoUpload2">Upload Photo <span class="required-symbol"> *</span></label>
          <input type="file" id="photoUpload2" name="photoUpload2" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="aadharUpload2">Upload Aadhar <span class="required-symbol"> *</span></label>
          <input type="file" id="aadharUpload2" name="aadharUpload2" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="panUpload2">Upload Pan <span class="required-symbol"> *</span></label>
          <input type="file" id="panUpload2" name="panUpload2" accept=".png, .jpg, .jpeg" required>
        </div>
        
        <div class="form-group">
          <label for="incomeProof">Upload Income Proof <span class="required-symbol"> *</span></label>
          <input type="file" id="incomeProof" name="incomeProof" accept=".png, .jpg, .jpeg" required>
        </div>
        <div class="form-group">
          <label for="residentialProof">Upload Residential Proof <span class="required-symbol"> *</span></label>
          <input type="file" id="residentialProof" name="residentialProof" accept=".png, .jpg, .jpeg" required>
        </div>
        <!-- Signature Upload Section -->
        <div class="form-group">
          <label for="signature">Upload Signature <span class="required-symbol"> *</span></label>
          <input type="text" id="signature" name="signature" class="dropdown" readonly placeholder="Click to Sign" onclick="openSignatureBox()" required>
        </div>

        <!-- Signature Pad Modal -->
        <div id="signature-modal" class="modal">
          <div class="modal-content">
            <h3>Signature</h3>
            <div class="color-options">
              <button type="button" data-color="black" onclick="changePenColor('black')"></button>
              <button type="button" data-color="red" onclick="changePenColor('red')"></button>
              <button type="button" data-color="green" onclick="changePenColor('green')"></button>
              <button type="button" data-color="blue" onclick="changePenColor('blue')"></button>
            </div>
            <canvas id="signature-pad" width="300" height="150"></canvas>
            <div class="file-input-container">
              <label for="signature-file">Add Signature from File</label>
              <input type="file" id="signature-file" accept="image/*" onchange="loadSignatureFromFile(event)">
            </div>
            <div class="modal-actions">
              <button type="button" onclick="saveSignature()">Save</button>
              <button type="button" onclick="cancelSignature()">Cancel</button>
              <button type="button" onclick="resetSignature()">Reset</button>
            </div>
          </div>
        </div>

        <h2>Declaration and Consent</h2>
        <div class="form-group declare">
          <div class="checkbox-group">
            <input type="checkbox" id="agree" name="agree" required>
            <label for="agree">I Agree</label>
          </div>
          <p>I hereby declare that the information provided is accurate to the best of my knowledge.</p>
          <p>I consent to the processing of my personal and financial information for loan evaluation purposes.</p>  
        </div>
        <button type="submit" class="submit-btn">Submit Application</button>
        <br>
        <br>
        <button type="button" onclick="window.print()" class="print-btn">Print Application</button>
      </form>
    </div>
  </section>

  <footer>
    <div class="footer-container">
      <div class="company-details">
        <h3>Cybromatech Technology Private Limited</h3>
        <p>Smart solutions for all your loan management needs.</p>
      </div>
      <div class="contact-info">
        <h4>Contact Us</h4>
        <p>Marisoft IT Park, Kalyani Nagar,<br>Pune, Maharashtra, 411014</p>
        <p>Phone: <a href="tel:+919422295192">+91 94222 95192</a>, <a href="tel:+919730972384">+91 97309 72384</a></p>
        <p>Email: <a href="/cdn-cgi/l/email-protection#dcbfa5beaeb3b1bda8b9bfb4acaaa8b0a8b8f2b5b2bab39cbbb1bdb5b0f2bfb3b1"><span class="__cf_email__" data-cfemail="0c6f756e7e63616d78696f647c7a786078682265626a634c6b616d6560226f6361">[email&#160;protected]</span></a></p>
      </div>
      <div class="social-icons">
        <h4>Follow Us</h4>
        <a href="#"><i class="fab fa-facebook"></i></a>
        <a href="#"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
    <div class="footer-bottom">
      <p>&copy; 2025 Cybromatech Technology Pvt. Ltd. All Rights Reserved.</p>
    </div>
  </footer>

  <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script>
  <script>

document.addEventListener('DOMContentLoaded', function() {
  const menuBar = document.getElementById('menu-bar');
  const navLinks = document.querySelector('.nav-links');

  menuBar.addEventListener('click', () => {
    navLinks.classList.toggle('active');
  });
});
    // Data for towns or Talukas of each districts
    const townsData = {
          "Ahmednagar": ["Ahmednagar", "Shirdi", "Sangamner", "Kopargaon", "Rahata", "Shrirampur", "Pathardi", "Rahuri", "Shrigonda", "Jamkhed", "Newasa", "Karjat", "Akole", "Parner", "Shevgaon", "Nagar", "Bhingar", "Miri", "Puntamba", "Kolhar", "Takali Dhokeshwar", "Wadgaon Gupta"],

          "Akola": ["Akola","Akot","Balapur","Patur","Murtijapur","Telhara","Barshitakli"],

  "Amravati": ["Amravati", "Achalpur", "Daryapur", "Warud", "Chandur", "Anjangaon", "Morshi", "Chikhaldara", "Nandgaon Khandeshwar", "Teosa"],

  "SambhajiNagar": ["SambhajiNagar", "Paithan", "Khuldabad", "Vaijapur", "Kannad", "Sillod", "Phulambri", "Soegaon", "Gangapur"],

  "Beed": ["Beed", "Majalgaon", "Georai", "Patoda", "Kaij", "Wadwani", "Dharur", "Ambajogai", "Ashti", "Parli"],

  "Bhandara": ["Bhandara", "Tumsar", "Sakoli", "Lakhani", "Mohadi", "Pauni", "Lakhandur"],

  "Buldhana": ["Buldhana", "Chikhli", "Khamgaon", "Shegaon", "Deulgaon Raja", "Mehkar", "Nandura", "Sangrampur", "Jalgaon Jamod", "Malkapur", "Motala"],

  "Chandrapur": ["Chandrapur", "Ballarpur", "Warora", "Rajura", "Brahmapuri", "Mul", "Chimur", "Pombhurna", "Korpana", "Gondpipri", "Sawali"],

  "Dhule": ["Dhule", "Sakri", "Shirpur", "Dondaicha", "Shindkheda"],

  "Gadchiroli": ["Gadchiroli", "Aheri", "Armori", "Chamorshi", "Mulchera", "Etapalli", "Bhamragad", "Kurkheda", "Dhanora", "Sironcha"],

  "Gondia": ["Gondia", "Tirora", "Amgaon", "Deori", "Sadak Arjuni", "Salekasa", "Goregaon"],

  "Hingoli": ["Hingoli", "Sengaon", "Basmath", "Kalamnuri", "Aundha Nagnath"],

  "Jalgaon": ["Jalgaon", "Bhusawal", "Chopda", "Erandol", "Yawal", "Amalner", "Parola","Bhadgaon","Pachora", "Dharangaon", "Jamner", "Raver", "Bodwad"],

  "Jalna": ["Jalna", "Ambad", "Badnapur", "Partur", "Mantha", "Ghansawangi", "Bhokardan", "Jafrabad"],

  "Kolhapur": ["Kolhapur", "Ichalkaranji", "Gadhinglaj", "Kagal", "Shahuwadi", "Panhala", "Hatkanangale", "Karvir", "Radhanagari", "Ajra", "Chandgad", "Bhudargad"],

  "Latur": ["Latur", "Udgir", "Ausa", "Nilanga", "Renapur", "Chakur", "Deoni", "Jalkot"],

  "Mumbai City": ["Marine Lines", "Cuffe Parade", "Malabar Hill", "Fort", "Byculla", "Girgaon", "Tardeo"],

  "Mumbai Suburban": ["Borivali", "Andheri", "Bandra", "Goregaon", "Malad", "Kandivali", "Dahisar", "Kurla", "Ghatkopar", "Powai", "Mulund"],

  "Nagpur": ["Nagpur", "Hingna", "Kamptee", "Katol", "Kalameshwar", "Umred", "Mouda", "Saoner", "Ramtek", "Bhiwapur", "Parseoni", "Nagpur Rural"],

  "Nanded": ["Nanded", "Biloli", "Degloor", "Hadgaon", "Mudkhed", "Ardhapur", "Himayatnagar", "Kinwat", "Kandhar", "Mahur", "Mukhed", "Loha"],

  "Nandurbar": ["Nandurbar", "Shahada", "Taloda", "Akkalkuwa", "Akrani (Dhadgaon)", "Navapur"],
  "Nashik": ["Nashik", "Malegaon", "Manmad", "Sinnar", "Igatpuri", "Kalwan", "Niphad", "Chandwad", "Trimbak", "Yeola", "Dindori", "Baglan (Satana)"],

  "Osmanabad": ["Osmanabad", "Tuljapur", "Omerga", "Paranda", "Kalamb", "Bhoom", "Washi", "Lohara"],

  "Palghar": ["Palghar", "Vasai", "Dahanu", "Boisar", "Jawhar", "Talasari", "Mokhada", "Vikramgad", "Wada"],

  "Parbhani": ["Parbhani", "Pathri", "Purna", "Manwath", "Selu", "Jintur", "Sonpeth", "Gangakhed"],

  "Pune": ["Pune", "Baramati", "Junnar", "Shirur", "Haveli", "Bhor", "Daund", "Indapur", "Khed", "Maval", "Mulshi", "Ambegaon", "Velhe"],

  "Raigad": ["Raigad", "Alibag", "Panvel", "Uran", "Murud", "Khalapur", "Pen", "Karjat", "Roha", "Mangaon", "Mahad", "Shrivardhan", "Sudhagad (Pali)"],

  "Ratnagiri": ["Ratnagiri", "Chiplun", "Dapoli", "Guhagar", "Sangameshwar", "Rajapur", "Khed", "Mandangad", "Lanja"],

  "Sangli": ["Sangli", "Tasgaon", "Vita", "Islampur", "Miraj", "Kadegaon", "Jat", "Palus", "Khanapur", "Shirala", "Atpadi"],

  "Satara": ["Satara", "Karad", "Mahabaleshwar", "Phaltan", "Wai", "Koregaon", "Khandala", "Patan", "Jaoli", "Man"],

  "Sindhudurg": ["Sindhudurg", "Malvan", "Kudal", "Sawantwadi", "Vengurla", "Devgad", "Dodamarg", "Kankavli"],

  "Solapur": ["Solapur", "Pandharpur", "Barshi", "Mangalwedha", "Akkalkot", "Sangole", "Karmala", "Madha", "Malshiras"],

  "Thane": ["Thane", "Ulhasnagar", "Kalyan", "Bhiwandi", "Murbad", "Shahapur", "Ambernath", "Dombivli"],

  "Wardha": ["Wardha", "Arvi", "Hinganghat", "Pulgaon", "Deoli", "Seloo", "Ashti", "Karanja"],

  "Washim": ["Washim", "Risod", "Mangrulpir", "Karanja", "Malegaon", "Manora"],
  
  "Yavatmal": ["Yavatmal", "Pusad", "Darwha", "Digras", "Arni", "Ghatanji", "Ralegaon", "Wani", "Pandharkawada (Kelapur)", "Umarkhed", "Zari Jamni", "Ner"]
      
};

    // Populate towns based on the selected district
    function populateTowns() {
      const districtSelect = document.getElementById('district');
      const townSelect = document.getElementById('town');

      // Clear existing options
      townSelect.innerHTML = '<option value="" disabled selected>--Select Taluka--</option>';

      const selectedDistrict = districtSelect.value;
      if (selectedDistrict && townsData[selectedDistrict]) {
        townsData[selectedDistrict].forEach(town => {
          const option = document.createElement('option');
          option.value = town;
          option.textContent = town;
          townSelect.appendChild(option);
        });
      }
    }

    // Script for input validation 
    document.addEventListener('DOMContentLoaded', () => {
      const inputs = {
        fullName: {
          element: document.getElementById('name'),
          regex: /^[A-Za-z\s]+$/,
          errorMessage: "Invalid full name. Only alphabets and spaces are allowed.",
          successMessage: "Valid full name.",
        },
        phone: {
          element: document.getElementById('phone'),
          regex: /^[6-9]\d{9}$/,
          errorMessage: "Invalid phone number. Must be 10 digits starting with 6-9.",
          successMessage: "Valid phone number.",
        },
        email: {
          element: document.getElementById('email'),
          regex: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,
          errorMessage: "Invalid email address format.",
          successMessage: "Valid email address.",
        },
        pan: {
          element: document.getElementById('pan'),
          regex: /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,
          errorMessage: "Invalid PAN format. Must be in format: ABCDE1234F.",
          successMessage: "Valid PAN number.",
        },
        aadhar: {
          element: document.getElementById('aadhar'),
          regex: /^\d{12}$/,
          errorMessage: "Invalid Aadhaar number. Must be exactly 12 digits.",
          successMessage: "Valid Aadhaar number.",
        },
        guarantorPhone: {
          element: document.getElementById('refContact1'),
          regex: /^[6-9]\d{9}$/,
          errorMessage: "Invalid guarantor phone number. Must be 10 digits starting with 6-9.",
          successMessage: "Valid phone number.",
        },
        guarantorPan: {
          element: document.getElementById('guarantorPan'),
          regex: /^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,
          errorMessage: "Invalid guarantor PAN format. Must be in format: ABCDE1234F.",
          successMessage: "Valid PAN number.",
        },
        guarantorAadhar: {
          element: document.getElementById('guarantorAadhar'),
          regex: /^\d{12}$/,
          errorMessage: "Invalid guarantor Aadhaar number. Must be exactly 12 digits.",
          successMessage: "Valid Aadhaar number.",
        },
        guarantorName: {
          element: document.getElementById('refName1'),
          regex: /^[A-Za-z\s]+$/,
          errorMessage: "Invalid guarantor name. Only alphabets and spaces are allowed.",
          successMessage: "Valid guarantor name.",
        },
        guarantorRelationship: {
          element: document.getElementById('refRelationship1'),
          regex: /^[A-Za-z\s]+$/,
          errorMessage: "Invalid relationship. Only alphabets and spaces are allowed.",
          successMessage: "Valid relationship.",
        },
      };

      Object.values(inputs).forEach(({ element, regex, errorMessage, successMessage }) => {
        const messageElement = document.createElement('div');
        messageElement.className = 'validation-message';
        element.parentElement.appendChild(messageElement);

        element.addEventListener('input', () => {
          if (!regex.test(element.value)) {
            messageElement.style.color = 'red';
            messageElement.textContent = errorMessage;
          } else {
            messageElement.style.color = 'green';
            messageElement.textContent = successMessage;
          }
        });
      });
    });

    // Signature
    const canvas = document.getElementById("signature-pad");
    const ctx = canvas.getContext("2d");
    let drawing = false;
    let penColor = "black"; // Default pen color

    function resizeCanvas() {
      canvas.width = Math.min(window.innerWidth * 0.9, 450);
      canvas.height = Math.min(window.innerHeight * 0.3, 200);
    }

    // Resize canvas on load and resize
    window.onload = resizeCanvas;
    window.onresize = resizeCanvas;

    // Drawing with mouse and touch
    function getEventPosition(e) {
      const rect = canvas.getBoundingClientRect();
      return {
        x: (e.touches ? e.touches[0].clientX : e.clientX) - rect.left,
        y: (e.touches ? e.touches[0].clientY : e.clientY) - rect.top
      };
    }

    canvas.addEventListener("mousedown", (e) => startDrawing(getEventPosition(e)));
    canvas.addEventListener("mousemove", (e) => draw(getEventPosition(e)));
    canvas.addEventListener("mouseup", stopDrawing);

    canvas.addEventListener("touchstart", (e) => {
      e.preventDefault();
      startDrawing(getEventPosition(e));
    });
    canvas.addEventListener("touchmove", (e) => {
      e.preventDefault();
      draw(getEventPosition(e));
    });
    canvas.addEventListener("touchend", stopDrawing);

    function startDrawing({ x, y }) {
      drawing = true;
      ctx.beginPath();
      ctx.moveTo(x, y);
    }

    function draw({ x, y }) {
      if (!drawing) return;
      ctx.strokeStyle = penColor;
      ctx.lineTo(x, y);
      ctx.stroke();
    }

    function stopDrawing() {
      drawing = false;
    }

    function changePenColor(color) {
      penColor = color;
    }

    function resetSignature() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }

    function openSignatureBox() {
      document.getElementById("signature-modal").style.display = "flex";
    }

    function cancelSignature() {
      document.getElementById("signature-modal").style.display = "none";
    }

    function saveSignature() {
      const imageData = canvas.toDataURL("image/png");
      document.getElementById("signature").value = "Signature saved";
      document.getElementById("signature-modal").style.display = "none";
    }

    function loadSignatureFromFile(event) {
      const file = event.target.files[0];
      if (file && file.type.startsWith("image/")) {
        const reader = new FileReader();
        reader.onload = (e) => {
          const img = new Image();
          img.onload = () => ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
          img.src = e.target.result;
        };
        reader.readAsDataURL(file);
      } else {
        alert("Please select a valid image file.");
      }
    }

    //script for loan amount
document.getElementById("loanAmount").addEventListener("input", function () {
  const loanAmount = this.value;
  const errorElement = document.getElementById("loanAmountError");

  if (loanAmount < 10000 || loanAmount > 1000000) {
    errorElement.textContent = "Loan amount must be between ₹10,000 and ₹10,00,000.";
  } else {
    errorElement.textContent = ""; // Clear error message
  }
});

    document.getElementById("dob").addEventListener("change", function () {
      const dob = new Date(this.value);
      const today = new Date();
      let age = today.getFullYear() - dob.getFullYear();
      const monthDiff = today.getMonth() - dob.getMonth();
      const dayDiff = today.getDate() - dob.getDate();

      // Adjust age calculation if birthday has not occurred yet this year
      if (monthDiff < 0 || (monthDiff === 0 && dayDiff < 0)) {
        age--;
      }

      const errorElement = document.getElementById("dob-error");

      // Show or hide error based on strict age validation (must be over 18)
      if (age <= 18) {
        errorElement.style.display = "block"; // Show error message
        this.setCustomValidity("You must be older than 18 years."); // Prevent form submission
      } else {
        errorElement.style.display = "none"; // Hide error message
        this.setCustomValidity(""); // Allow form submission
      }
    });

    function submitLoanApplication(event) {
      event.preventDefault();
      
      // Collect form data
      const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        phone: document.getElementById('phone').value,
        dob: document.getElementById('dob').value,
        gender: document.getElementById('gender').value,
        ownership: document.getElementById('ownership').value,
        address: document.getElementById('address').value,
        pan: document.getElementById('pan').value,
        aadhar: document.getElementById('aadhar').value,
        state: document.getElementById('state').value,
        district: document.getElementById('district').value,
        town: document.getElementById('town').value,
        loanAmount: document.getElementById('loanAmount').value,
        tenure: document.getElementById('tenure').value,
        emiSchedule: document.getElementById('emiSchedule').value,
        refName1: document.getElementById('refName1').value,
        refRelationship1: document.getElementById('refRelationship1').value,
        refContact1: document.getElementById('refContact1').value,
        gownership: document.getElementById('gownership').value,
        guarantorAddress: document.getElementById('guarantorAddress').value,
        guarantorPan: document.getElementById('guarantorPan').value,
        guarantorAadhar: document.getElementById('guarantorAadhar').value,
        status: 'Pending',
      };

      // Get existing applications or initialize an empty array
      let loanApplications = JSON.parse(localStorage.getItem('loanApplications')) || [];
      
      // Add the new application
      loanApplications.push(formData);
      
      // Save updated applications back to localStorage
      localStorage.setItem('loanApplications', JSON.stringify(loanApplications));

      alert("Your loan application has been successfully submitted!");
      document.getElementById('loanForm').reset();
    }

    function validateForm() {
      let valid = true;

      // Clear previous error messages
      clearErrors();

      // Validate Loan Amount
      const loanAmount = document.getElementById('loanAmount').value;
      if (loanAmount < 10000) {
        document.getElementById('loanAmountError').innerText = "Loan amount must be at least ₹10,000.";
        valid = false;
      }

      // Validate Loan Tenure
      const tenure = document.getElementById('tenure').value;
      if (tenure < 6 || tenure > 240) {
        document.getElementById('tenureError').innerText = "Loan tenure should be between 6 months and 240 months.";
        valid = false;
      }

      // Validate EMI Schedule
      const emiSchedule = document.getElementById('emiSchedule').value;
      if (!emiSchedule) {
        document.getElementById('emiScheduleError').innerText = "Please select a preferred EMI schedule.";
        valid = false;
      }

      return valid;
    }

    function clearErrors() {
      const errorElements = document.querySelectorAll('.error');
      errorElements.forEach(element => {
        element.innerText = '';
      });
    }

    document.getElementById('loanForm').addEventListener('submit', function(e) {
      e.preventDefault();
      if (validateForm()) {
        submitLoanApplication(e);
      }
    });

    function showAlert(message) {
      const alertDiv = document.createElement('div');
      alertDiv.className = 'custom-alert';
      alertDiv.innerHTML = `
        <p>${message}</p>
        <button onclick="this.parentElement.style.display='none'">Close</button>
      `;
      document.body.appendChild(alertDiv);
    }

    //just added
     // Function to convert image to base64
    function getBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
      }
      // Process all file inputs
      const fileInputs = ['photoUpload', 'aadharUpload', 'panUpload', 'incomeProof', 'residentialProof', 
                            'photoUpload2', 'aadharUpload2', 'panUpload2', 'gincomeProof', 'gresidentialProof'];


                            
    // Convert image inputs to Base64 and store them
    convertImageToBase64(document.getElementById('photoUpload'), function (photoBase64) {
        formData.photo = photoBase64;

        convertImageToBase64(document.getElementById('aadharUpload'), function (aadharBase64) {
            formData.aadhar = aadharBase64;

            convertImageToBase64(document.getElementById('panUpload'), function (panBase64) {
                formData.panCard = panBase64;

                // convertImageToBase64(document.getElementById('incomeProof'), function (incomeBase64) {
                //   formData.income = incomeBase64;




       
        
        // Promise.all(fileInputs.map(inputId => {
        //     const file = document.getElementById(inputId).files[0];
        //     return file ? getBase64(file) : Promise.resolve(null);
        // })).then(results => {
        //     fileInputs.forEach((inputId, index) => {
        //         formData[inputId] = results[index];
        //     });


                // Get existing applications or initialize an empty array
                let loanApplications = JSON.parse(localStorage.getItem('loanApplications')) || [];
                
                // Add the new application
                loanApplications.push(formData);
                
                // Save updated applications back to localStorage
                localStorage.setItem('loanApplications', JSON.stringify(loanApplications));

                alert("Your loan application has been successfully submitted!");
                document.getElementById('loanForm').reset();
            });
        });
    });
  // });



  </script>
</body>
</html>

